<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="mermaid-1607381194272" width="100%" height="773" style="max-width:226.890625px" viewBox="0 0 226.891 773"><style>#mermaid-1607381194272{fill:#333}#mermaid-1607381194272,#mermaid-1607381194272 svg{font-family:&quot;trebuchet ms&quot;,verdana,arial;font-size:16px}#mermaid-1607381194272 .label{font-family:&quot;trebuchet ms&quot;,verdana,arial;color:#333}#mermaid-1607381194272 .node path,#mermaid-1607381194272 .node polygon,#mermaid-1607381194272 .node rect{fill:#ececff;stroke:#9370db;stroke-width:1px}#mermaid-1607381194272 .node .label{text-align:center}#mermaid-1607381194272 .arrowheadPath{fill:#333}#mermaid-1607381194272 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1607381194272 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1607381194272 .edgeLabel rect{opacity:.5;background-color:#e8e8e8;fill:#e8e8e8}#mermaid-1607381194272:root{--mermaid-font-family:&quot;trebuchet ms&quot;,verdana,arial,sans-serif}</style><g><g class="output"><g class="edgePaths"><g id="L-state.Store-EventPublisher.Publish" class="edgePath LS-state.Store LE-EventPublisher.Publish" style="opacity:1"><path marker-end="url(#arrowhead23849)" d="M113.4453125,47L113.4453125,81.5L113.4453125,116" class="path" style="fill:none"/><defs><marker id="arrowhead23849" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-EventPublisher.Publish-EventPublisher.topicBuffer" class="edgePath LS-EventPublisher.Publish LE-EventPublisher.topicBuffer" style="opacity:1"><path marker-end="url(#arrowhead23850)" d="M113.4453125,155L113.4453125,189.5L113.4453125,224" class="path" style="fill:none"/><defs><marker id="arrowhead23850" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-EventPublisher.topicBuffer-Subscription" class="edgePath LS-EventPublisher.topicBuffer LE-Subscription" style="opacity:1"><path marker-end="url(#arrowhead23851)" d="M113.4453125,263L113.4453125,288L113.4453125,313" class="path" style="fill:none"/><defs><marker id="arrowhead23851" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-Subscription-SubscribeEndpoint" class="edgePath LS-Subscription LE-SubscribeEndpoint" style="opacity:1"><path marker-end="url(#arrowhead23852)" d="M113.4453125,352L113.4453125,386.5L113.4453125,421" class="path" style="fill:none"/><defs><marker id="arrowhead23852" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-SubscribeEndpoint-ProtobufEvents" class="edgePath LS-SubscribeEndpoint LE-ProtobufEvents" style="opacity:1"><path marker-end="url(#arrowhead23853)" d="M113.4453125,460L113.4453125,494.5L113.9453125,529.5" class="path" style="fill:none"/><defs><marker id="arrowhead23853" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-ProtobufEvents-MaterializedView" class="edgePath LS-ProtobufEvents LE-MaterializedView" style="opacity:1"><path marker-end="url(#arrowhead23854)" d="M113.9453125,568.5L113.4453125,602.5L113.4453125,637" class="path" style="fill:none"/><defs><marker id="arrowhead23854" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-MaterializedView-HTTPEndpoint" class="edgePath LS-MaterializedView LE-HTTPEndpoint" style="opacity:1"><path marker-end="url(#arrowhead23855)" d="M113.4453125,676L113.4453125,701L113.4453125,726" class="path" style="fill:none"/><defs><marker id="arrowhead23855" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(113.4453125,81.5) translate(-90.7421875,-9.5)"><rect width="181.484" height="19" rx="0" ry="0"/><foreignObject width="181.484" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-state.Store-EventPublisher.Publish" class="edgeLabel L-LS-state.Store' L-LE-EventPublisher.Publish">events in different topics</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(113.4453125,189.5) translate(-51.6328125,-9.5)"><rect width="103.266" height="19" rx="0" ry="0"/><foreignObject width="103.266" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-EventPublisher.Publish-EventPublisher.topicBuffer" class="edgeLabel L-LS-EventPublisher.Publish' L-LE-EventPublisher.topicBuffer">group by topic</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-EventPublisher.topicBuffer-Subscription" class="edgeLabel L-LS-EventPublisher.topicBuffer' L-LE-Subscription"/></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(113.4453125,386.5) translate(-101.4609375,-9.5)"><rect width="202.922" height="19" rx="0" ry="0"/><foreignObject width="202.922" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-Subscription-SubscribeEndpoint" class="edgeLabel L-LS-Subscription' L-LE-SubscribeEndpoint">filter by key and namespace</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(113.4453125,494.5) translate(-89.0390625,-9.5)"><rect width="178.078" height="19" rx="0" ry="0"/><foreignObject width="178.078" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-SubscribeEndpoint-ProtobufEvents" class="edgeLabel L-LS-SubscribeEndpoint' L-LE-ProtobufEvents">filter by auth (acl token)</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(113.4453125,602.5) translate(-59.234375,-9.5)"><rect width="118.469" height="19" rx="0" ry="0"/><foreignObject width="118.469" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-ProtobufEvents-MaterializedView" class="edgeLabel L-LS-ProtobufEvents' L-LE-MaterializedView">filter with bexpr</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-MaterializedView-HTTPEndpoint" class="edgeLabel L-LS-MaterializedView' L-LE-HTTPEndpoint"/></div></foreignObject></g></g></g><g class="nodes"><g id="flowchart-state.Store-20321" class="node default" transform="translate(113.4453125,27.5)" style="opacity:1"><rect width="99.75" height="39" x="-49.875" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-39.875,-9.5)"><foreignObject width="79.75" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">state.Store</div></foreignObject></g></g></g><g id="flowchart-EventPublisher.Publish-20322" class="node default" transform="translate(113.4453125,135.5)" style="opacity:1"><rect width="181.063" height="39" x="-90.531" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-80.53125,-9.5)"><foreignObject width="161.063" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">EventPublisher.Publish</div></foreignObject></g></g></g><g id="flowchart-EventPublisher.topicBuffer-20324" class="node default" transform="translate(113.4453125,243.5)" style="opacity:1"><rect width="210.891" height="39" x="-105.445" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-95.4453125,-9.5)"><foreignObject width="190.891" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">EventPublisher.topicBuffer</div></foreignObject></g></g></g><g id="flowchart-Subscription-20326" class="node default" transform="translate(113.4453125,332.5)" style="opacity:1"><rect width="107.688" height="39" x="-53.844" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-43.84375,-9.5)"><foreignObject width="87.688" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">Subscription</div></foreignObject></g></g></g><g id="flowchart-SubscribeEndpoint-20328" class="node default" transform="translate(113.4453125,440.5)" style="opacity:1"><rect width="151.547" height="39" x="-75.773" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-65.7734375,-9.5)"><foreignObject width="131.547" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">SubscribeEndpoint</div></foreignObject></g></g></g><g id="flowchart-ProtobufEvents-20330" class="node default" transform="translate(113.4453125,548.5)" style="opacity:1"><polygon points="-13 0 44.594 0 64.094 -39 6.5 -39" class="label-container" transform="translate(-25.546875,19.5)"/><g class="label"><g transform="translate(0,0) translate(-15.546875,-9.5)"><foreignObject width="31.094" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">grpc</div></foreignObject></g></g></g><g id="flowchart-MaterializedView-20332" class="node default" transform="translate(113.4453125,656.5)" style="opacity:1"><rect width="142.844" height="39" x="-71.422" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-61.421875,-9.5)"><foreignObject width="122.844" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">MaterializedView</div></foreignObject></g></g></g><g id="flowchart-HTTPEndpoint-20334" class="node default" transform="translate(113.4453125,745.5)" style="opacity:1"><rect width="121.344" height="39" x="-60.672" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-50.671875,-9.5)"><foreignObject width="101.344" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">HTTPEndpoint</div></foreignObject></g></g></g></g></g></g></svg>