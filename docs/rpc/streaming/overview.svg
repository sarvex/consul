<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="mermaid-1607376911734" width="100%" height="708" style="max-width:843.8984375px" viewBox="0 0 843.898 708"><style>#mermaid-1607376911734{font-family:&quot;trebuchet ms&quot;,verdana,arial;font-size:16px;fill:#333;}#mermaid-1607376911734 .error-icon{fill:#552222;}#mermaid-1607376911734 .error-text{fill:#552222;stroke:#552222;}#mermaid-1607376911734 .edge-thickness-normal{stroke-width:2px;}#mermaid-1607376911734 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1607376911734 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1607376911734 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1607376911734 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1607376911734 .marker{fill:#333333;}#mermaid-1607376911734 .marker.cross{stroke:#333333;}#mermaid-1607376911734 svg{font-family:&quot;trebuchet ms&quot;,verdana,arial;font-size:16px;}#mermaid-1607376911734 .label{font-family:&quot;trebuchet ms&quot;,verdana,arial;color:#333;}#mermaid-1607376911734 .label text{fill:#333;}#mermaid-1607376911734 .node rect,#mermaid-1607376911734 .node circle,#mermaid-1607376911734 .node ellipse,#mermaid-1607376911734 .node polygon,#mermaid-1607376911734 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1607376911734 .node .label{text-align:center;}#mermaid-1607376911734 .node.clickable{cursor:pointer;}#mermaid-1607376911734 .arrowheadPath{fill:#333333;}#mermaid-1607376911734 .edgePath .path{stroke:#333333;stroke-width:1.5px;}#mermaid-1607376911734 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1607376911734 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1607376911734 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1607376911734 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1607376911734 .cluster text{fill:#333;}#mermaid-1607376911734 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&quot;trebuchet ms&quot;,verdana,arial;font-size:12px;background:hsl(80,100%,96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1607376911734:root{--mermaid-font-family:&quot;trebuchet ms&quot;,verdana,arial,sans-serif;}#mermaid-1607376911734 .start &gt; *{fill:transparent !important;stroke:transparent !important;}#mermaid-1607376911734 .start tspan{!important;}#mermaid-1607376911734 flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"><g id="flowchart-ServerAgent-67929" class="cluster" transform="translate(614.82421875,455.5)" style="opacity:1"><rect width="442.148" height="489" x="-221.074" y="-244.5"/><g id="mermaid-1607376911734Text" class="label"><g transform="translate(0, -230.5) translate(-45.765625,-9.5)"><foreignObject width="91.531" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">Server Agent</div></foreignObject></g></g></g><g id="flowchart-ClientAgent-67930" class="cluster" transform="translate(190.875,287.5)" style="opacity:1"><rect width="365.75" height="381" x="-182.875" y="-190.5"/><g id="mermaid-1607376911734Text" class="label"><g transform="translate(0, -176.5) translate(-44.3828125,-9.5)"><foreignObject width="88.766" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">Client Agent</div></foreignObject></g></g></g></g><g class="edgePaths"><g id="L-Read-HTTPEndpoint" class="edgePath LS-Read LE-HTTPEndpoint" style="opacity:1"><path marker-end="url(#arrowhead66170)" d="M164.796875,42.149276179733036L109.046875,72L109.046875,97L109.046875,122" class="path" style="fill:none"/><defs><marker id="arrowhead66170" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-Read-DNSEndpoint" class="edgePath LS-Read LE-DNSEndpoint" style="opacity:1"><path marker-end="url(#arrowhead66171)" d="M219.515625,42.149276179733036L275.265625,72L275.265625,97L275.265625,122" class="path" style="fill:none"/><defs><marker id="arrowhead66171" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-HTTPEndpoint-rpcClient.Health" class="edgePath LS-HTTPEndpoint LE-rpcClient.Health" style="opacity:1"><path marker-end="url(#arrowhead66172)" d="M109.046875,161L109.046875,186L109.046875,211L155.73753511235955,236" class="path" style="fill:none"/><defs><marker id="arrowhead66172" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-DNSEndpoint-rpcClient.Health" class="edgePath LS-DNSEndpoint LE-rpcClient.Health" style="opacity:1"><path marker-end="url(#arrowhead66173)" d="M275.265625,161L275.265625,186L275.265625,211L228.57496488764045,236" class="path" style="fill:none"/><defs><marker id="arrowhead66173" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-rpcClient.Health-AgentCache" class="edgePath LS-rpcClient.Health LE-AgentCache" style="opacity:1"><path marker-end="url(#arrowhead66174)" d="M192.15625,275L192.15625,300L192.15625,325" class="path" style="fill:none"/><defs><marker id="arrowhead66174" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-AgentCache-MaterializedView" class="edgePath LS-AgentCache LE-MaterializedView" style="opacity:1"><path marker-end="url(#arrowhead66175)" d="M192.15625,364L192.15625,389L192.15625,414" class="path" style="fill:none"/><defs><marker id="arrowhead66175" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-MaterializedView-SubscribeEndpoint" class="edgePath LS-MaterializedView LE-SubscribeEndpoint" style="opacity:1"><path marker-end="url(#arrowhead66176)" d="M192.15625,453L192.15625,478L504.5234375,503L504.5234375,528" class="path" style="fill:none"/><defs><marker id="arrowhead66176" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-SubscribeEndpoint-EventPublisher" class="edgePath LS-SubscribeEndpoint LE-EventPublisher" style="opacity:1"><path marker-end="url(#arrowhead66177)" d="M504.5234375,567L504.5234375,601.5L570.7956814236111,636" class="path" style="fill:none"/><defs><marker id="arrowhead66177" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-Write-RPCEndpoint" class="edgePath LS-Write LE-RPCEndpoint" style="opacity:1"><path marker-end="url(#arrowhead66178)" d="M711.984375,161L711.984375,186L711.984375,211L711.984375,236" class="path" style="fill:none"/><defs><marker id="arrowhead66178" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-RPCEndpoint-raft.Apply" class="edgePath LS-RPCEndpoint LE-raft.Apply" style="opacity:1"><path marker-end="url(#arrowhead66179)" d="M711.984375,275L711.984375,300L711.984375,325" class="path" style="fill:none"/><defs><marker id="arrowhead66179" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-raft.Apply-FSM.applyRegistration" class="edgePath LS-raft.Apply LE-FSM.applyRegistration" style="opacity:1"><path marker-end="url(#arrowhead66180)" d="M711.984375,364L711.984375,389L711.984375,414" class="path" style="fill:none"/><defs><marker id="arrowhead66180" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-FSM.applyRegistration-state.Store.Register" class="edgePath LS-FSM.applyRegistration LE-state.Store.Register" style="opacity:1"><path marker-end="url(#arrowhead66181)" d="M711.984375,453L711.984375,478L711.984375,503L711.984375,528" class="path" style="fill:none"/><defs><marker id="arrowhead66181" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g><g id="L-state.Store.Register-EventPublisher" class="edgePath LS-state.Store.Register LE-EventPublisher" style="opacity:1"><path marker-end="url(#arrowhead66182)" d="M711.984375,567L711.984375,601.5L645.7121310763889,636" class="path" style="fill:none"/><defs><marker id="arrowhead66182" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-Read-HTTPEndpoint" class="edgeLabel L-LS-Read' L-LE-HTTPEndpoint"/></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-Read-DNSEndpoint" class="edgeLabel L-LS-Read' L-LE-DNSEndpoint"/></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-HTTPEndpoint-rpcClient.Health" class="edgeLabel L-LS-HTTPEndpoint' L-LE-rpcClient.Health"/></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-DNSEndpoint-rpcClient.Health" class="edgeLabel L-LS-DNSEndpoint' L-LE-rpcClient.Health"/></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-rpcClient.Health-AgentCache" class="edgeLabel L-LS-rpcClient.Health' L-LE-AgentCache"/></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-AgentCache-MaterializedView" class="edgeLabel L-LS-AgentCache' L-LE-MaterializedView"/></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-MaterializedView-SubscribeEndpoint" class="edgeLabel L-LS-MaterializedView' L-LE-SubscribeEndpoint"/></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(504.5234375,601.5) translate(-64.5390625,-9.5)"><rect width="129.078" height="19" rx="0" ry="0"/><foreignObject width="129.078" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-SubscribeEndpoint-EventPublisher" class="edgeLabel L-LS-SubscribeEndpoint' L-LE-EventPublisher">Subscribe to topic</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-Write-RPCEndpoint" class="edgeLabel L-LS-Write' L-LE-RPCEndpoint"/></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-RPCEndpoint-raft.Apply" class="edgeLabel L-LS-RPCEndpoint' L-LE-raft.Apply"/></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-raft.Apply-FSM.applyRegistration" class="edgeLabel L-LS-raft.Apply' L-LE-FSM.applyRegistration"/></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(0,0)"><rect width="0" height="0" rx="0" ry="0"/><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-FSM.applyRegistration-state.Store.Register" class="edgeLabel L-LS-FSM.applyRegistration' L-LE-state.Store.Register"/></div></foreignObject></g></g><g class="edgeLabel" style="opacity:1"><g class="label" transform="translate(711.984375,601.5) translate(-48.140625,-9.5)"><rect width="96.281" height="19" rx="0" ry="0"/><foreignObject width="96.281" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span id="L-L-state.Store.Register-EventPublisher" class="edgeLabel L-LS-state.Store.Register' L-LE-EventPublisher">Publish event</span></div></foreignObject></g></g></g><g class="nodes"><g id="flowchart-RPCEndpoint-67899" class="node default" transform="translate(711.984375,255.5)" style="opacity:1"><rect width="111.188" height="39" x="-55.594" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-45.59375,-9.5)"><foreignObject width="91.188" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">RPCEndpoint</div></foreignObject></g></g></g><g id="flowchart-raft.Apply-67900" class="node default" transform="translate(711.984375,344.5)" style="opacity:1"><rect width="92.641" height="39" x="-46.32" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-36.3203125,-9.5)"><foreignObject width="72.641" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">raft.Apply</div></foreignObject></g></g></g><g id="flowchart-FSM.applyRegistration-67901" class="node default" transform="translate(711.984375,433.5)" style="opacity:1"><rect width="177.828" height="39" x="-88.914" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-78.9140625,-9.5)"><foreignObject width="157.828" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">FSM.applyRegistration</div></foreignObject></g></g></g><g id="flowchart-state.Store.Register-67902" class="node default" transform="translate(711.984375,547.5)" style="opacity:1"><rect width="163.375" height="39" x="-81.688" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-71.6875,-9.5)"><foreignObject width="143.375" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">state.Store.Register</div></foreignObject></g></g></g><g id="flowchart-SubscribeEndpoint-67903" class="node default" transform="translate(504.5234375,547.5)" style="opacity:1"><rect width="151.547" height="39" x="-75.773" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-65.7734375,-9.5)"><foreignObject width="131.547" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">SubscribeEndpoint</div></foreignObject></g></g></g><g id="flowchart-EventPublisher-67904" class="node default" transform="translate(608.25390625,655.5)" style="opacity:1"><rect width="126.25" height="39" x="-63.125" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-53.125,-9.5)"><foreignObject width="106.25" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">EventPublisher</div></foreignObject></g></g></g><g id="flowchart-HTTPEndpoint-67894" class="node default" transform="translate(109.046875,141.5)" style="opacity:1"><rect width="121.344" height="39" x="-60.672" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-50.671875,-9.5)"><foreignObject width="101.344" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">HTTPEndpoint</div></foreignObject></g></g></g><g id="flowchart-DNSEndpoint-67895" class="node default" transform="translate(275.265625,141.5)" style="opacity:1"><rect width="111.094" height="39" x="-55.547" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-45.546875,-9.5)"><foreignObject width="91.094" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">DNSEndpoint</div></foreignObject></g></g></g><g id="flowchart-rpcClient.Health-67896" class="node default" transform="translate(192.15625,255.5)" style="opacity:1"><rect width="139" height="39" x="-69.5" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-59.5,-9.5)"><foreignObject width="119" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">rpcClient.Health</div></foreignObject></g></g></g><g id="flowchart-AgentCache-67897" class="node default" transform="translate(192.15625,344.5)" style="opacity:1"><rect width="104.656" height="39" x="-52.328" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-42.328125,-9.5)"><foreignObject width="84.656" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">AgentCache</div></foreignObject></g></g></g><g id="flowchart-MaterializedView-67898" class="node default" transform="translate(192.15625,433.5)" style="opacity:1"><rect width="142.844" height="39" x="-71.422" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-61.421875,-9.5)"><foreignObject width="122.844" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">MaterializedView</div></foreignObject></g></g></g><g id="flowchart-Read-67905" class="node start" transform="translate(192.15625,27.5)" style="opacity:1"><rect width="54.719" height="39" x="-27.359" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-17.359375,-9.5)"><foreignObject width="34.719" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">Read</div></foreignObject></g></g></g><g id="flowchart-Write-67919" class="node start" transform="translate(711.984375,141.5)" style="opacity:1"><rect width="58.688" height="39" x="-29.344" y="-19.5" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-19.34375,-9.5)"><foreignObject width="38.688" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">Write</div></foreignObject></g></g></g></g></g></g></svg>